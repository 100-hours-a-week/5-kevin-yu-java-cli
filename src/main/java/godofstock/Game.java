package godofstock;

import godofstock.investor.Investor;
import godofstock.investor.Player;
import godofstock.investor.Revenger;
import godofstock.stockfirm.TradingSystem;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Arrays;
import java.util.Comparator;

public class Game {
    public static final int NUMBER_OF_PLAYERS = 4;
    public static final int LAST_DAY = 7;

    public static void main(String[] args) throws IOException {
        printTitle();

        boolean loop = true;
        while (loop) {
            System.out.println("""
                    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
                                  Î©îÏù∏ Î©îÎâ¥
                    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
                    """);
            System.out.println("1. Í≤åÏûÑ ÏãúÏûë");
            System.out.println("2. Í≤åÏûÑ Í∑úÏπô ÌôïÏù∏");
            System.out.println("3. Í≤åÏûÑ Ï¢ÖÎ£å");

            BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
            System.out.print("Ïà´ÏûêÎßå ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî. >> ");
            String userInput = br.readLine();

            switch (userInput) {
                case "1" -> startGame();
                case "2" -> {}
                case "3" -> loop = false;
                default -> {
                    System.out.println(MessageConst.CAUTION_SELECT);
                }
            }
        }

        System.out.println("""
                
                  ####     ####     ####    #####             #####    ##  ##   ###### \s
                 ######   ######   ######   ######            ##  ##   ##  ##   ###### \s
                 ##       ##  ##   ##  ##   ##  ##            ##  ##   ######   ##     \s
                 ## ###   ##  ##   ##  ##   ##  ##            #####     ####    ####   \s
                 ##  ##   ##  ##   ##  ##   ##  ##            ##  ##     ##     ##     \s
                 ######   ######   ######   ######            ##  ##     ##     ###### \s
                  ####     ####     ####    #####             #####      ##     ###### \s
                """);
    }

    private static void startGame() throws IOException {
        Investor[] investors = initInvestors();
        TradingSystem tradingSystem = new TradingSystem(investors);

        while (tradingSystem.getDay() <= LAST_DAY) {
            System.out.printf("""
                    
                    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
                                 üå§ DAY %d
                    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
                    
                    """, tradingSystem.getDay());
            tradingSystem.trade();
        }

        Arrays.sort(investors, Comparator.comparingInt(Investor::getBudget).reversed());
        System.out.println("""
                ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
                         üèÜ   ÏµúÏ¢Ö ÏàúÏúÑ   üèÜ
                ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
                """);

        for (int i = 0; i < NUMBER_OF_PLAYERS; i++) {
            String rank = switch (i) {
                case 0 -> "ü•á";
                case 1 -> "ü•à";
                case 2 -> "ü•â";
                default -> "";
            };

            System.out.printf("""
                    ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
                    %s %dÏúÑ - %s
                    ÏµúÏ¢Ö ÏûêÏÇ∞: %,d $
                    """, rank, i + 1, investors[i].getName(), investors[i].getBudget());
        }

        System.out.println("‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n");
    }

    private static Investor[] initInvestors() throws IOException {
        Investor[] investors = new Investor[NUMBER_OF_PLAYERS];

        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        System.out.print("Í≤åÏûÑÏóêÏÑú ÏÇ¨Ïö©Ìï† ÎãâÎÑ§ÏûÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî. >> ");
        String userName = br.readLine();

        investors[0] = new Player(userName);
        investors[1] = new Revenger();
        investors[2] = new Revenger("Ïù¥ÏßÄÎ∂ê");
        investors[3] = new Revenger("Ï†úÍ∞àÍ∏àÏàò");

        return investors;
    }

    private static void printTitle() {
        System.out.println("""
                \s
                                                                                                                                                                                                                      \s
                      ,o888888o.        ,o888888o.     8 888888888o.                    ,o888888o.     8 8888888888                d888888o.   8888888 8888888888     ,o888888o.         ,o888888o.    8 8888     ,88'\s
                     8888     `88.   . 8888     `88.   8 8888    `^888.              . 8888     `88.   8 8888                    .`8888:' `88.       8 8888        . 8888     `88.      8888     `88.  8 8888    ,88' \s
                  ,8 8888       `8. ,8 8888       `8b  8 8888        `88.           ,8 8888       `8b  8 8888                    8.`8888.   Y8       8 8888       ,8 8888       `8b  ,8 8888       `8. 8 8888   ,88'  \s
                  88 8888           88 8888        `8b 8 8888         `88           88 8888        `8b 8 8888                    `8.`8888.           8 8888       88 8888        `8b 88 8888           8 8888  ,88'   \s
                  88 8888           88 8888         88 8 8888          88           88 8888         88 8 888888888888             `8.`8888.          8 8888       88 8888         88 88 8888           8 8888 ,88'    \s
                  88 8888           88 8888         88 8 8888          88           88 8888         88 8 8888                      `8.`8888.         8 8888       88 8888         88 88 8888           8 8888 88'     \s
                  88 8888   8888888 88 8888        ,8P 8 8888         ,88           88 8888        ,8P 8 8888                       `8.`8888.        8 8888       88 8888        ,8P 88 8888           8 888888<      \s
                  `8 8888       .8' `8 8888       ,8P  8 8888        ,88'           `8 8888       ,8P  8 8888                   8b   `8.`8888.       8 8888       `8 8888       ,8P  `8 8888       .8' 8 8888 `Y8.    \s
                     8888     ,88'   ` 8888     ,88'   8 8888    ,o88P'              ` 8888     ,88'   8 8888                   `8b.  ;8.`8888       8 8888        ` 8888     ,88'      8888     ,88'  8 8888   `Y8.  \s
                      `8888888P'        `8888888P'     8 888888888P'                    `8888888P'     8 8888                    `Y8888P ,88P'       8 8888           `8888888P'         `8888888P'    8 8888     `Y8.\s
                \s
                \s
                \s
                \s""");

        System.out.println("""
                ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
                   Ïù¥ Í≤åÏûÑÏùÄ 3Î™ÖÏùò NPCÏôÄ Ï£ºÏãù Ìà¨Ïûê ÎåÄÍ≤∞ÏùÑ Î≤åÏù¥Îäî Í≤åÏûÑÏûÖÎãàÎã§. Í∞Å ÌöåÏÇ¨Ïùò Ï£ºÍ∞ÄÎäî Ïã§Ï†ú Ï£ºÏãùÍ≥º Î¨¥Í¥ÄÌïòÎ©∞ ÎûúÎç§ÌïòÍ≤å Î∞∞Ï†ïÎê©ÎãàÎã§. ÌîåÎ†àÏù¥Ïñ¥ÏôÄ Í∞Å NPCÎäî Í∞úÏù∏ Îä•Î†•ÏùÑ Í∞ÄÏßÄÍ≥† ÏãúÏûëÌï©ÎãàÎã§. ÎãπÏã†Ïùò Ïö¥Í≥º Ïã§Î†•ÏùÑ ÏãúÌóòÌï¥Î≥¥ÏÑ∏Ïöî!
                ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
                """);
    }
}
